$(".owl-one").owlCarousel({loop:!1,margin:0,responsiveClass:!0,checkVisible:!1,dots:!1,nav:!0,autoWidth:78,navText:['<span class="ti-arrow-left glyphicon glyphicon-chevron-left" aria-hidden="true">&nbsp;<<&nbsp;</span>','<span class="ti-arrow-right glyphicon glyphicon-chevron-right" aria-hidden="true">&nbsp;>>&nbsp;</span>'],responsive:{0:{items:3,nav:!0,mouseDrag:!1},600:{items:6,nav:!0,mouseDrag:!1},1000:{items:13,nav:!0,loop:!1,mouseDrag:!1}}});const $animalGrid=$(".animal-grid").isotope({itemSelector:".filter-block",filter:".r1"}),animalFilters={};filterActivator(".filters",animalFilters,$animalGrid);let $weaponGrid=$(".weapon-grid").isotope({itemSelector:".filter-block",filter:".a0.rifles"}),weaponFilters={};filterActivator(".filters2",weaponFilters,$weaponGrid);let logoBlock=$("#logo"),reserveBlock=$(".reserve-section"),reserveBlockTitle=$(".reserve-section label"),reserveGrid=$("#reserve-list"),reserveCheckbox=$("input#nav-toggle-reserves"),animalBlock=$(".animal-section"),animalBlockTitle=$(".animal-section label"),animalGrid=$("#animal-list"),animalCheckbox=$("input#nav-toggle-animals"),weaponBlock=$(".weapon-section"),weaponGrid=$("#weapon-list"),weaponBlockTitle=$(".weapon-section label");function scanElements(e){let i=$(".count-animal"),t=$(".count-weapon"),a=e.trim().toLowerCase(),l=animalGrid.find(".animal");l.each(function(){let e=$(this).attr("data-filter").match(/^\.a\d+/)[0];$(this).attr("data-filter",`${e}.${a}`)}),clearAmmoHints("reserve"),clearAmmoHints("weapon"),reserves.removeClass("allowed-reserve"),weapons.removeClass("is-checked"),l.removeClass("is-checked"),animalGrid.find(".allowed-weapon").removeClass("allowed-weapon"),i.removeClass("active-animal"),t.removeClass("active-weapon"),animalBlock.find(".selected-title").text("All"),weaponBlock.find(".section-title").replaceWith(`<span class="section-title">${e} <span class="count-weapon">(-)</span>: <span class="selected-title">All</span></span>`),$weaponGrid.isotope({filter:`.${a}`})}function checkAnimalCount(){let e=$(".count-animal");if("1"===animalGrid.css("opacity")&&animalGrid.find(".animal.is-checked").is(":visible"))if(reserveGrid.is(":visible")){let i=reserveGrid.find(".allowed-reserve:not(.r-all)").length;e.text(`(${i})`),e.addClass("active-animal")}else{let i=animalGrid.find(".animal:visible").length;e.text(`(${i})`),e.removeClass("active-animal")}else if("1"===animalGrid.css("opacity"))if(animalGrid.find(".animal.is-checked:visible").length)animalBlock.find(".selected-title").text(animalGrid.find(".animal.is-checked").text());else{let i=countAnimals(reserveGrid.find(".is-checked").data("filter").substring(1));reserveGrid.find(".reserve").removeClass("allowed-reserve"),animalGrid.find(".animal").removeClass("is-checked"),e.removeClass("active-animal"),i?e.text(`(${i})`):e.text(`(${animalGrid.find(".animal").length})`),animalBlock.find(".selected-title").text("All")}else if(animalGrid.find(".animal.is-checked").length){let i=reserveGrid.find(".is-checked").data("filter").substring(1);if(!animalGrid.find(".animal.is-checked").hasClass(i)){let t=countAnimals(i);reserveGrid.find(".reserve").removeClass("allowed-reserve"),animalGrid.find(".animal").removeClass("is-checked"),e.removeClass("active-animal"),0!==t?e.text(`(${t})`):e.text(`(${animalGrid.find(".animal").length})`),animalBlock.find(".selected-title").text("All")}}}function countAnimals(e){let i=0;return animals.each(function(){$(this).hasClass(e)&&(i+=1)}),i}function checkWeaponCount(){let e=weaponBlock.find(".count-weapon");if("1"===animalGrid.css("opacity")){let i=animalGrid.find(".allowed-weapon:visible").length;e.find(".active-weapon").length?e.html(`<span class="count-weapon active-weapon">(${i})</span>`):(setTimeout(function(){"All"===animalBlock.find(".selected-title").text()&&(animalGrid.css("opacity","1"),weaponBlockTitle.removeClass("fix-title"),weaponGrid.css({"margin-top":"initial"}),weaponBlockTitle.css({borderBottom:"5px solid transparent"}),$("#weapon-container").css("position","absolute"))},200),e.find(".active-weapon").text(`(${i})`))}else if(reserveGrid.is(":visible")){let i=reserveGrid.find(".is-checked").data("filter").substring(1);const t=weaponGrid.find(".is-checked").data("allowed");let a=0;""!==i?animals.each(function(){$(this).hasClass(i)&&$(this).hasClass(t)&&(a+=1)}):animals.each(function(){$(this).hasClass(t)&&(a+=1)}),animalGrid.find(".allowed-weapon:visible").length?e.html(`<span class="count-weapon active-weapon">(${a})</span>`):weaponGrid.is(":visible")&&setTimeout(function(){"All"===animalBlock.find(".selected-title").text()?(animalBlockTitle.click(),"0"===animalGrid.css("opacity")&&(weaponBlockTitle.removeClass("fix-title"),weaponGrid.css({"margin-top":"initial"}),weaponBlockTitle.css({borderBottom:"5px solid transparent"}),weaponGrid.animate({"margin-top":0},200),weaponBlock.animate({"margin-top":0},200)),e.removeClass("active-weapon"),animalGrid.find(".allowed-weapon").removeClass("allowed-weapon"),e.text("(-)"),weaponGrid.find(".weapon").removeClass("is-checked"),weaponBlock.find(".selected-title").text("All"),$("#weapon-container").css("position","absolute"),setTimeout(function(){animalGrid.animate({"margin-top":0},200),animalGrid.isotope("layout")},800)):e.html('<span class="count-weapon active-weapon">(1)</span>')},200)}else e.removeClass("active-weapon"),e.text("(-)"),weaponGrid.find(".weapon").removeClass("is-checked")}const reserves=reserveGrid.find("button.reserve"),animals=animalGrid.find("button.animal"),weapons=weaponGrid.find("button.weapon"),isMobile=isMobileDevice();function showAnimalMaps(e,i){$(this).closest(".button-group").remove(".target-count"),showAnimalInfo(i)}function checkWeaponTitle(){weaponBlockTitle.hasClass("fix-title")&&animalGrid.css("opacity","0"),"absolute"!==$("#weapon-container").css("position")&&(isOnScreen(weaponGrid)||weaponBlockTitle.hasClass("fix-title")&&(animalGrid.css("opacity","1"),weaponBlockTitle.removeClass("fix-title"),weaponGrid.css({"margin-top":"initial"}),weaponBlockTitle.css({borderBottom:"5px solid transparent"})))}function showAnimalInfo(e){if($(`.${e}`).removeClass(`allowed-${e}`),animalGrid.find(".animal.is-checked").length){let i=animalGrid.find(".animal.is-checked").attr("class").split(/\s+/).filter(function(e){return e.match(/^r\d+$/)});reserves.each(function(){let t=$(this);$(i).each(function(i,a){t.data("filter").substring(1)===a&&t.addClass(`allowed-${e}`)})})}else if("0"===animalGrid.css("opacity")){let e=$(".count-animal"),i=countAnimals(reserveGrid.find(".is-checked").data("filter").substring(1));0!==i?e.text(`(${i})`):e.text(`(${animalGrid.find(".animal").length})`)}}function filterActivator(e,i,t){$(e).on("click",".button",function(){if(".filters"===e&&"0"===animalGrid.css("opacity")){if(animalBlockTitle.hasClass("fix-title")){animalBlock.find(".selected-title").text();let e=$(this),a=e.parents(".button-group").attr("data-filter-group");i[a]=e.attr("data-filter");let l=concatValues(i);t.isotope({filter:l})}}else{let e=$(this),a=e.parents(".button-group").attr("data-filter-group");i[a]=e.attr("data-filter");let l=concatValues(i);t.isotope({filter:l})}})}function markAllowedTargets(e,i){e.on("click",function(){let t=$(`.selected-${i}`);if(e.addClass("is-checked"),t.text(t.text()),$(`#${i}-list button.${i}`).hasClass("is-checked")){const e=$(`#${i}-list .is-checked`).data("allowed");animals.removeClass(`allowed-${i}`),animals.each(function(){let t=$(this);t.hasClass(e)&&t.addClass(`allowed-${i}`)});let t=weaponBlock.find(".count-weapon");animalGrid.find(".allowed-weapon:visible").length?t.html(`<span class="count-weapon active-weapon">(${animalGrid.find(".allowed-weapon:visible").length})</span>`):t.html('<span class="count-weapon active-weapon">(1)</span>')}})}function clearAmmoHints(e){"reserve"===e?reserves.find("svg").remove():weapons.find("svg").remove()}function showAnimalHints(){let e=reserveGrid.find(".reserve.is-checked").data("filter").substring(1);const i=animalGrid.find(`.animal.${e}`).length;weapons.each(function(){let t=$(this).data("allowed");const a=animalGrid.find(`.animal.${e}.${t}`).length;let l=Math.round(100/i*a);$(this).find("span").data("val",l)}),colorHints(weapons)}function showReserveHints(e){let i=$(e.target).data("allowed");reserves.each(function(){const e=$(this).data("filter").substring(1);if("r0"!==e){const t=animalGrid.find(`.animal.${e}`).length,a=animalGrid.find(`.animal.${e}.${i}`).length;let l=Math.round(100/t*a);$(this).find("span").data("val",l)}}),colorHints(reserves)}function colorHints(e){e.find(".progresspie").progressPie({valueData:"val",color:function(e){return e<=0?"#333333":e<=20&&e>1?"#800f0f":e<=35?"#794005":e<=50?"#69610d":e<=75?"#1a4d58":e<=100?"#1f561d":void 0},ringWidth:10,strokeWidth:1,size:10,strokeColor:"#333333",animate:!1,mode:$.fn.progressPie.Mode.COLOR})}function revealOtherGrid(e,i){const t=$(`#${i}-container`);"absolute"===t.css("position")&&t.css({position:"initial"})}function styleSelectedButtons(e){$(e).on("click",function(){$(this).closest(".button-group").find(".item").removeClass("is-checked"),$(this).addClass("is-checked"),$(this).closest(".col-md-12").find(".selected-title").text($(this).text()),$(this).closest(".col-md-12").find(".selected-title").removeClass("temporary-title")}),isMobile||($(e).mouseover(function(){let e=$(this).closest(".col-md-12").find(".selected-title");e.addClass("temporary-title"),e.text($(this).ignore("span").text()),"undefined"!=typeof exTimeout&&clearTimeout(exTimeout),$(this).hasClass("is-checked")&&e.removeClass("temporary-title")}),$(e).mouseleave(function(){let e=$(this).closest(".col-md-12").find(".selected-title"),i=$(this).closest(".col-md-12").find(".is-checked");exTimeout=setTimeout(function(){e.removeClass("temporary-title"),i.length?e.text(i.ignore("span").text()):e.text("All")},50)}))}styleSelectedButtons(".button-group .button.item"),reserves.each(function(){$(this).on("click",function(e){showAnimalInfo("reserve"),setTimeout(function(){clearAmmoHints("weapon"),".r0"!==$(e.target).data("filter")&&showAnimalHints()},600),setTimeout(checkWeaponTitle,200),setTimeout(checkWeaponCount,600),setTimeout(checkAnimalCount,600)}),markAllowedTargets($(this),"weapon")}),animals.each(function(){$(this).on("click",function(){showAnimalMaps($(this),"reserve"),revealOtherGrid($(this),"weapon"),setTimeout(checkWeaponCount,600),setTimeout(checkAnimalCount,600)}),markAllowedTargets($(this),"weapon")}),weapons.each(function(){$(this).on("click",function(e){setTimeout(function(){clearAmmoHints("reserve"),showReserveHints(e,"weapon")},600)}),markAllowedTargets($(this),"weapon")});let reserveBlockHeight=reserveBlock.css("height"),reserveBlockTop=reserveBlock.offset().top,reserveBlockTitleHeight=reserveBlockTitle.css("height"),reserveBlockWidth=reserveBlock.css("width"),animalBlockTitleHeight=animalBlockTitle.css("height"),animalBlockHeight=animalBlock.css("height"),weaponBlockTitleHeight=weaponBlockTitle.css("height"),globalAnimalBlock;function hideShowReserveBlock(e){reserveCheckbox.is(":checked")?($(e).parent().find(".button-group").slideDown(300,function(){animalBlockTitle.animate({top:parseInt(reserveBlockHeight,10)},300),animalBlockTitle.hasClass("fix-title")?animalBlock.animate({"margin-top":parseInt(reserveBlockHeight,10)}):animalBlock.animate({"margin-top":0}),weaponBlockTitle.hasClass("fix-title")?weaponBlockTitle.animate({top:parseInt(reserveBlockHeight,10)+parseInt(animalBlockTitleHeight,10)+10}):weaponBlockTitle.animate({top:0})}),reserveBlock.find(".section-title").css({color:"#7a7164"})):($(".temp-bg").length||weaponBlockTitle.after('<span class="temp-bg weapon-bg"></span>'),"fixed"===reserveBlock.css("position")&&(weaponBlockTitle.hasClass("fix-title")?$(".weapon-bg").css({top:parseInt(reserveBlockTitleHeight,10),height:parseInt(animalBlockHeight,10)-parseInt(reserveBlockTitleHeight,10)}):$(".weapon-bg").css({top:parseInt(reserveBlockTitleHeight,10),height:parseInt(animalBlockHeight,10)-parseInt(reserveBlockTitleHeight,10)-parseInt(animalBlockTitleHeight,10)})),$(e).parent().find(".button-group").slideUp(300,function(){let e=reserveBlock.css("height");animalBlockTitle.animate({top:parseInt(e,10)},200),animalBlockTitle.hasClass("fix-title")?animalBlock.animate({"margin-top":parseInt(e,10)}):animalBlock.animate({"margin-top":0}),weaponBlockTitle.hasClass("fix-title")?weaponBlockTitle.animate({top:parseInt(e,10)+parseInt(animalBlockTitleHeight,10)+10}):weaponBlockTitle.animate({top:0}),weaponBlockTitle.hasClass("fix-title")?$(".weapon-bg").animate({height:0},800):$(".weapon-bg").animate({height:0})}),reserveBlock.find(".section-title").css({color:"#8f4b28"}))}function hideShowAnimalBlock(e){invisibleBlockCheck(),animalCheckbox.is(":checked")?"0"===animalGrid.css("opacity")&&($(e).parent().find(".button-group").animate({height:parseInt(globalAnimalBlock,10)+92},300,function(){$(this).css("visibility","initial"),animalBlock.find(".section-title").css({color:"#7a7164"})}),$(e).parent().find(".button-group").animate({opacity:1}),setTimeout(function(){weaponBlock.animate({"margin-top":0},200),weaponGrid.animate({"margin-top":0},200),animalGrid.animate({"margin-top":0},200);let e=animalBlockTitle.offset().top,i=weaponBlockTitle.offset().top;if(e+parseInt(animalBlockTitleHeight)>i){let t=e+parseInt(animalBlockTitleHeight)+parseInt(weaponBlockTitleHeight)-i+20;weaponBlockTitle.animate({top:t})}else animalBlockTitle.hasClass("fix-title")&&(animalGrid.css("opacity","1"),weaponBlockTitle.removeClass("fix-title"),weaponBlockTitle.css({borderBottom:"5px solid transparent"}))},200),setTimeout(function(){reserveGrid.find(".is-checked").click()},400)):($(e).parent().find(".button-group").animate({opacity:0,height:0},300,function(){if($(this).css("visibility","hidden"),animalBlockTitle.hasClass("fix-title")){let e=animalBlockTitle.offset().top,i=weaponBlockTitle.offset().top;if(e+parseInt(animalBlockTitleHeight)>i){let t=e+parseInt(animalBlockTitleHeight)-i+10;weaponBlock.animate({"margin-top":t})}setTimeout(function(){if("absolute"!==$("#weapon-container").css("position")){if(weaponGrid.css({"margin-top":parseInt(weaponBlockTitleHeight,10)}),weaponBlock.animate({"margin-top":0},200),animalBlockTitle.hasClass("fix-title")&&weaponBlockTitle.hasClass("fix-title")){weaponBlockTitle.css({top:parseInt(animalBlockTitleHeight,10)+10});let e=animalBlockTitle.offset().top,i=weaponBlockTitle.offset().top;if(e+parseInt(animalBlockTitleHeight)>i){let t=e+parseInt(animalBlockTitleHeight)+parseInt(weaponBlockTitleHeight)-i+20;weaponBlockTitle.animate({top:t})}}else reserveGrid.is(":visible")?weaponBlockTitle.css({top:parseInt(reserveBlockHeight,10)+parseInt(animalBlockTitleHeight,10)+10}):weaponBlockTitle.css({top:parseInt(reserveBlock.css("height"),10)+parseInt(animalBlockTitleHeight,10)+10});weaponBlockTitle.addClass("fix-title"),weaponBlockTitle.css({borderBottom:"5px solid #f26822"})}},300)}}),setTimeout(function(){"absolute"!==$("#weapon-container").css("position")&&animalBlockTitle.hasClass("fix-title"),weaponBlockTitle.css({borderBottom:"5px solid transparent"})},200),animalBlock.find(".section-title").css({color:"#8f4b28"}))}function invisibleBlockCheck(){setTimeout(function(){"0"!==animalGrid.css("opacity")&&"hidden"!==animalGrid.css("visibility")&&(globalAnimalBlock=animalGrid.find("button:visible").last().css("top"))},100),"0"===animalGrid.css("opacity")&&animalGrid.css({height:"0px"})}function isOnScreen(e){if(0==e.length)return;let i=jQuery(window),t=i.scrollTop(),a=t+i.height(),l=jQuery(e),n=l.offset().top;return n+l.height()>t&&n<a}function scan(start,end){return eval(start+end)}function concatValues(e){let i="";for(let t in e)i+=e[t];return i}function isMobileDevice(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}function changeAmmoBlock(e){scanElements(e)}$(window).scroll(function(){if($(window).scrollTop()>reserveBlockTop){let e=reserveBlock.css("height");reserveBlock.css({position:"fixed",top:"0",width:reserveBlockWidth}),animalBlock.css({"margin-top":parseInt(e,10)})}else reserveBlock.css("position","static"),animalBlock.css({"margin-top":0});let e=parseInt($(".reserve-section").css("height"),10)-parseInt($("#reserve-list").css("height"),10)+parseInt(reserveBlockTitleHeight,10)+parseInt(animalBlockTitleHeight,10)-reserveBlockTop+8;if("none"===reserveGrid.css("display")&&(e=parseInt($(".reserve-section").css("height"),10)+parseInt(reserveBlockTitleHeight,10)+parseInt(animalBlockTitleHeight,10)-reserveBlockTop+8),$(window).scrollTop()>e-10){let e=reserveBlock.css("height");animalBlockTitle.css({top:parseInt(e,10)}),animalBlockTitle.addClass("fix-title"),animalGrid.css({"margin-top":parseInt(animalBlockTitleHeight,10)+5+"px"}),$(window).scrollTop()>parseInt(e,10)-10?animalBlockTitle.css({borderBottom:"5px solid #8f4b28"}):animalBlockTitle.css({borderBottom:"5px solid #f26822"})}else animalBlockTitle.removeClass("fix-title"),animalGrid.css({"margin-top":"initial"}),animalBlockTitle.css({borderBottom:"5px solid transparent"});if("absolute"!==$("#weapon-container").css("position")&&isOnScreen($(".weapon-grid"))){let e=parseInt($(".reserve-section").css("height"),10)-reserveBlockTop+parseInt($("#animal-container").css("height"),10)-parseInt(animalBlockTitleHeight,10)-parseInt(weaponBlockTitleHeight,10)-22;"none"===reserveGrid.css("display")&&(e=parseInt($(".reserve-section").css("height"),10)+parseInt(reserveBlockTitleHeight,10)+parseInt(animalBlockTitleHeight,10)+parseInt($("#animal-container").css("height"),10)-parseInt(weaponBlockTitleHeight,10)-reserveBlockTop-8),$(window).scrollTop()>e?(animalGrid.css("opacity","0"),weaponBlockTitle.css({top:parseInt(reserveBlockHeight,10)+parseInt(animalBlockTitleHeight,10)+10}),"none"===reserveGrid.css("display")&&weaponBlockTitle.css({top:parseInt(reserveBlockTitleHeight,10)+parseInt(animalBlockTitleHeight,10)+30}),weaponBlockTitle.addClass("fix-title"),"0"===animalGrid.css("opacity")?weaponGrid.css({"margin-top":parseInt(weaponBlockTitleHeight,10)+10+"px"}):weaponGrid.css({"margin-top":parseInt(weaponBlockTitleHeight,10)+parseInt(animalBlockTitleHeight,10)-28+"px"}),$(window).scrollTop()>e+parseInt(weaponGrid.find("button").css("height"),10)?weaponBlockTitle.css({borderBottom:"5px solid #8f4b28"}):weaponBlockTitle.css({borderBottom:"5px solid #f26822"})):(animalGrid.css("opacity","1"),weaponBlockTitle.removeClass("fix-title"),weaponGrid.css({"margin-top":"initial"}),weaponBlockTitle.css({borderBottom:"5px solid transparent"}))}}),reserveBlockTitle.on("click",function(){hideShowReserveBlock(this)}),animalBlockTitle.on("click",function(){hideShowAnimalBlock(this)}),$.fn.ignore=function(e){return this.clone().find(e||">*").remove().end()},$(".dropdown-item").click(function(){let e=$(this).text();$(".dropdown-item").removeClass("btn-active"),$(this).addClass("btn-active"),$(this).closest(".btn-group").find(".dropdown-toggle").text(e),changeAmmoBlock(e)});